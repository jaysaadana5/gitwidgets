<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GitWidgets ‚Äî Gamified GitHub README Widgets</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0a0a0f;
  --bg2:#12121a;
  --bg3:#1a1a26;
  --surface:#1e1e2e;
  --border:#2a2a3e;
  --text:#e8e8f0;
  --text-dim:#8888a8;
  --accent:#00f5a0;
  --accent2:#00d9ff;
  --accent3:#a855f7;
  --accent4:#f97316;
  --danger:#ef4444;
  --gold:#fbbf24;
  --xp-bar:#00f5a0;
  --card-glow:rgba(0,245,160,0.06);
}
html{scroll-behavior:smooth}
body{
  font-family:'Outfit',sans-serif;
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
}

/* ============ BACKGROUND EFFECTS ============ */
.bg-grid{
  position:fixed;inset:0;z-index:0;
  background-image:
    linear-gradient(rgba(0,245,160,0.03) 1px,transparent 1px),
    linear-gradient(90deg,rgba(0,245,160,0.03) 1px,transparent 1px);
  background-size:60px 60px;
  mask-image:radial-gradient(ellipse 80% 60% at 50% 30%,black,transparent);
}
.bg-glow{
  position:fixed;top:-200px;left:50%;transform:translateX(-50%);
  width:800px;height:800px;
  background:radial-gradient(circle,rgba(0,245,160,0.08),rgba(0,217,255,0.04),transparent 70%);
  z-index:0;pointer-events:none;
}
.bg-glow-2{
  position:fixed;bottom:-300px;right:-200px;
  width:600px;height:600px;
  background:radial-gradient(circle,rgba(168,85,247,0.06),transparent 70%);
  z-index:0;pointer-events:none;
}

/* ============ LAYOUT ============ */
.container{
  max-width:1200px;margin:0 auto;padding:0 24px;
  position:relative;z-index:1;
}

/* ============ HEADER ============ */
.header{
  padding:40px 0 20px;text-align:center;
  animation:fadeInDown .8s ease;
}
.logo{
  display:inline-flex;align-items:center;gap:12px;
  margin-bottom:16px;
}
.logo-icon{
  width:48px;height:48px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border-radius:12px;display:flex;align-items:center;justify-content:center;
  font-size:24px;font-weight:800;color:var(--bg);
  box-shadow:0 0 30px rgba(0,245,160,0.3);
  animation:pulse-glow 3s ease-in-out infinite;
}
.logo-text{
  font-family:'Space Mono',monospace;font-size:28px;font-weight:700;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.header p{
  color:var(--text-dim);font-size:16px;max-width:550px;margin:0 auto;
  line-height:1.6;
}
.header p span{color:var(--accent);font-weight:600}

/* ============ INPUT SECTION ============ */
.input-section{
  max-width:640px;margin:32px auto 40px;
  animation:fadeInUp .8s ease .2s both;
}
.input-wrapper{
  display:flex;gap:0;
  background:var(--bg2);
  border:1.5px solid var(--border);
  border-radius:16px;
  overflow:hidden;
  transition:border-color .3s,box-shadow .3s;
}
.input-wrapper:focus-within{
  border-color:var(--accent);
  box-shadow:0 0 0 4px rgba(0,245,160,0.1),0 0 40px rgba(0,245,160,0.08);
}
.input-prefix{
  display:flex;align-items:center;padding:0 16px;
  color:var(--text-dim);font-family:'JetBrains Mono',monospace;
  font-size:13px;white-space:nowrap;
  background:rgba(0,245,160,0.04);border-right:1px solid var(--border);
}
#username-input{
  flex:1;padding:16px;font-size:16px;
  background:transparent;border:none;outline:none;
  color:var(--text);font-family:'Outfit',sans-serif;
}
#username-input::placeholder{color:var(--text-dim);opacity:.5}
.generate-btn{
  padding:16px 28px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border:none;cursor:pointer;
  font-family:'Outfit',sans-serif;font-size:15px;font-weight:700;
  color:var(--bg);letter-spacing:.5px;
  transition:opacity .2s,transform .1s;
  white-space:nowrap;
}
.generate-btn:hover{opacity:.9}
.generate-btn:active{transform:scale(.98)}
.generate-btn:disabled{opacity:.5;cursor:not-allowed}

/* ============ LOADING ============ */
.loading-bar{
  height:3px;background:var(--bg3);border-radius:2px;
  margin-top:12px;overflow:hidden;display:none;
}
.loading-bar.active{display:block}
.loading-bar-fill{
  height:100%;width:0;
  background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3));
  border-radius:2px;
  animation:loading 1.5s ease-in-out infinite;
}

/* ============ PROFILE CARD ============ */
.profile-section{
  display:none;
  animation:fadeInUp .6s ease;
}
.profile-section.visible{display:block}

.profile-card{
  background:var(--bg2);
  border:1px solid var(--border);
  border-radius:20px;padding:32px;
  margin-bottom:32px;
  position:relative;overflow:hidden;
}
.profile-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:4px;
  background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3),var(--accent4));
}
.profile-top{display:flex;gap:24px;align-items:flex-start;flex-wrap:wrap}
.avatar{
  width:96px;height:96px;border-radius:50%;
  border:3px solid var(--accent);
  box-shadow:0 0 20px rgba(0,245,160,0.2);
}
.profile-info{flex:1;min-width:200px}
.profile-name{font-size:26px;font-weight:800;margin-bottom:2px}
.profile-username{
  color:var(--accent);font-family:'JetBrains Mono',monospace;
  font-size:14px;margin-bottom:8px;
}
.profile-bio{color:var(--text-dim);font-size:14px;line-height:1.5;margin-bottom:12px}
.profile-stats{display:flex;gap:20px;flex-wrap:wrap}
.stat{
  display:flex;align-items:center;gap:6px;
  font-size:13px;color:var(--text-dim);
}
.stat-val{color:var(--text);font-weight:700;font-size:15px}

/* ============ GAMIFICATION ============ */
.level-section{
  margin-top:24px;padding-top:24px;border-top:1px solid var(--border);
}
.level-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.level-badge{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 14px;border-radius:20px;
  font-weight:700;font-size:14px;
  border:1.5px solid;
}
.level-badge.bronze{border-color:#cd7f32;color:#cd7f32;background:rgba(205,127,50,0.1)}
.level-badge.silver{border-color:#c0c0c0;color:#c0c0c0;background:rgba(192,192,192,0.1)}
.level-badge.gold{border-color:var(--gold);color:var(--gold);background:rgba(251,191,36,0.1)}
.level-badge.platinum{border-color:var(--accent2);color:var(--accent2);background:rgba(0,217,255,0.1)}
.level-badge.diamond{
  border-color:var(--accent3);color:var(--accent3);background:rgba(168,85,247,0.1);
  box-shadow:0 0 15px rgba(168,85,247,0.2);
}
.level-badge.legendary{
  border-image:linear-gradient(135deg,var(--gold),var(--accent),var(--accent3)) 1;
  color:var(--gold);background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(168,85,247,0.08));
  animation:shimmer 3s ease-in-out infinite;
}
.xp-text{font-size:13px;color:var(--text-dim);font-family:'JetBrains Mono',monospace}
.xp-bar{
  height:8px;background:var(--bg3);border-radius:4px;overflow:hidden;
}
.xp-bar-fill{
  height:100%;border-radius:4px;
  transition:width 1.5s cubic-bezier(.4,0,.2,1);
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  box-shadow:0 0 10px rgba(0,245,160,0.4);
}

/* Achievements */
.achievements{
  display:flex;gap:10px;flex-wrap:wrap;margin-top:16px;
}
.achievement{
  display:flex;align-items:center;gap:6px;
  padding:6px 12px;border-radius:10px;
  background:var(--bg3);border:1px solid var(--border);
  font-size:12px;font-weight:600;
  transition:transform .2s,box-shadow .2s;
}
.achievement:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}
.achievement.unlocked{border-color:var(--gold);background:rgba(251,191,36,0.08)}
.achievement.locked{opacity:.4;filter:grayscale(1)}
.achievement-icon{font-size:16px}

/* ============ WIDGETS GRID ============ */
.widgets-header{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:20px;flex-wrap:wrap;gap:12px;
}
.widgets-title{font-size:22px;font-weight:800}
.theme-switcher{display:flex;gap:6px}
.theme-btn{
  width:28px;height:28px;border-radius:8px;border:2px solid var(--border);
  cursor:pointer;transition:transform .2s,border-color .2s;
}
.theme-btn:hover{transform:scale(1.1)}
.theme-btn.active{border-color:var(--accent);box-shadow:0 0 8px rgba(0,245,160,0.3)}
.theme-btn[data-theme="dark"]{background:linear-gradient(135deg,#0d1117,#161b22)}
.theme-btn[data-theme="light"]{background:linear-gradient(135deg,#fff,#f0f0f0)}
.theme-btn[data-theme="radical"]{background:linear-gradient(135deg,#141321,#fe428e)}
.theme-btn[data-theme="neon"]{background:linear-gradient(135deg,#0a0a0f,#00f5a0)}
.theme-btn[data-theme="cyberpunk"]{background:linear-gradient(135deg,#1a1025,#f97316)}
.theme-btn[data-theme="ocean"]{background:linear-gradient(135deg,#0a192f,#64ffda)}

.widgets-grid{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(360px,1fr));
  gap:20px;margin-bottom:40px;
}

.widget-card{
  background:var(--bg2);border:1px solid var(--border);
  border-radius:16px;overflow:hidden;
  transition:transform .3s,box-shadow .3s,border-color .3s;
  animation:fadeInUp .5s ease both;
}
.widget-card:hover{
  transform:translateY(-4px);
  box-shadow:0 12px 40px rgba(0,0,0,0.3);
  border-color:rgba(0,245,160,0.3);
}
.widget-card:nth-child(1){animation-delay:.1s}
.widget-card:nth-child(2){animation-delay:.15s}
.widget-card:nth-child(3){animation-delay:.2s}
.widget-card:nth-child(4){animation-delay:.25s}
.widget-card:nth-child(5){animation-delay:.3s}
.widget-card:nth-child(6){animation-delay:.35s}
.widget-card:nth-child(7){animation-delay:.4s}
.widget-card:nth-child(8){animation-delay:.45s}

.widget-label{
  padding:12px 16px;
  display:flex;justify-content:space-between;align-items:center;
  border-bottom:1px solid var(--border);
}
.widget-label-left{display:flex;align-items:center;gap:8px}
.widget-label-icon{font-size:18px}
.widget-label-text{font-weight:700;font-size:14px}
.widget-label-badge{
  font-size:11px;padding:2px 8px;border-radius:6px;
  font-weight:600;font-family:'JetBrains Mono',monospace;
}
.widget-label-badge.xp{background:rgba(0,245,160,0.15);color:var(--accent)}
.widget-label-badge.rare{background:rgba(168,85,247,0.15);color:var(--accent3)}
.widget-label-badge.epic{background:rgba(249,115,22,0.15);color:var(--accent4)}

.widget-preview{
  padding:16px;min-height:120px;
  display:flex;align-items:center;justify-content:center;
  background:var(--bg3);
}
.widget-preview img{
  max-width:100%;height:auto;border-radius:6px;
  image-rendering:auto;
}
.widget-preview svg{max-width:100%;height:auto}

.widget-actions{
  padding:12px 16px;display:flex;gap:8px;
  border-top:1px solid var(--border);
}
.copy-btn,.download-btn{
  flex:1;padding:8px 12px;border-radius:10px;
  border:1px solid var(--border);
  background:var(--bg3);color:var(--text);
  font-family:'Outfit',sans-serif;font-size:13px;font-weight:600;
  cursor:pointer;transition:all .2s;
  display:flex;align-items:center;justify-content:center;gap:6px;
}
.copy-btn:hover{border-color:var(--accent);color:var(--accent);background:rgba(0,245,160,0.06)}
.download-btn:hover{border-color:var(--accent2);color:var(--accent2);background:rgba(0,217,255,0.06)}
.copy-btn.copied{background:rgba(0,245,160,0.15);color:var(--accent);border-color:var(--accent)}

/* ============ CUSTOM WIDGET BUILDER ============ */
.builder-section{
  display:none;margin-bottom:60px;
  animation:fadeInUp .6s ease;
}
.builder-section.visible{display:block}
.builder-card{
  background:var(--bg2);border:1px solid var(--border);
  border-radius:20px;padding:32px;position:relative;overflow:hidden;
}
.builder-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:4px;
  background:linear-gradient(90deg,var(--accent3),var(--accent4),var(--danger));
}
.builder-title{font-size:22px;font-weight:800;margin-bottom:6px}
.builder-subtitle{color:var(--text-dim);font-size:14px;margin-bottom:24px}

.builder-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
@media(max-width:768px){.builder-grid{grid-template-columns:1fr}}

.builder-options{display:flex;flex-direction:column;gap:16px}
.option-group label{
  display:block;font-size:13px;font-weight:600;
  margin-bottom:6px;color:var(--text-dim);
  text-transform:uppercase;letter-spacing:1px;
}
.option-group select,.option-group input[type="text"],.option-group input[type="color"]{
  width:100%;padding:10px 14px;border-radius:10px;
  background:var(--bg3);border:1px solid var(--border);
  color:var(--text);font-family:'Outfit',sans-serif;font-size:14px;
  outline:none;transition:border-color .2s;
}
.option-group select:focus,.option-group input:focus{border-color:var(--accent)}
.option-group input[type="color"]{height:44px;cursor:pointer;padding:4px}

.color-row{display:flex;gap:10px}
.color-row .option-group{flex:1}

.builder-preview{
  background:var(--bg3);border-radius:14px;
  padding:20px;display:flex;flex-direction:column;
  align-items:center;justify-content:center;gap:16px;
  min-height:300px;
}
.builder-preview img{max-width:100%;border-radius:6px}
.builder-code{
  width:100%;margin-top:16px;
}
.builder-code textarea{
  width:100%;height:80px;padding:12px;border-radius:10px;
  background:var(--bg);border:1px solid var(--border);
  color:var(--accent);font-family:'JetBrains Mono',monospace;
  font-size:12px;resize:none;outline:none;
}
.copy-code-btn{
  margin-top:8px;width:100%;padding:10px;border-radius:10px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border:none;color:var(--bg);font-weight:700;font-size:14px;
  cursor:pointer;font-family:'Outfit',sans-serif;
  transition:opacity .2s;
}
.copy-code-btn:hover{opacity:.9}

/* ============ FOOTER ============ */
.footer{
  text-align:center;padding:40px 0;
  color:var(--text-dim);font-size:13px;
  border-top:1px solid var(--border);
}
.footer a{color:var(--accent);text-decoration:none}

/* ============ ERROR ============ */
.error-msg{
  text-align:center;padding:16px;margin:12px auto;max-width:640px;
  background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);
  border-radius:12px;color:var(--danger);font-size:14px;
  display:none;animation:shake .4s ease;
}
.error-msg.visible{display:block}

/* ============ RESPONSIVE ============ */
@media(max-width:640px){
  .widgets-grid{grid-template-columns:1fr}
  .profile-top{flex-direction:column;align-items:center;text-align:center}
  .profile-stats{justify-content:center}
  .input-prefix{display:none}
  .generate-btn{padding:16px 20px}
  .header .logo-text{font-size:22px}
  .achievements{justify-content:center}
}

/* ============ ANIMATIONS ============ */
@keyframes fadeInDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes loading{0%{width:0}50%{width:70%}100%{width:100%}}
@keyframes pulse-glow{0%,100%{box-shadow:0 0 20px rgba(0,245,160,0.3)}50%{box-shadow:0 0 40px rgba(0,245,160,0.5)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
@keyframes shimmer{0%,100%{opacity:1}50%{opacity:.8}}
@keyframes countUp{from{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}
.count-anim{animation:countUp .5s cubic-bezier(.4,0,.2,1) both}

/* ============ SCROLLBAR ============ */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:var(--border)}

/* ============ CONFETTI CANVAS ============ */
#confetti{position:fixed;inset:0;z-index:9999;pointer-events:none}
</style>
</head>
<body>

<div class="bg-grid"></div>
<div class="bg-glow"></div>
<div class="bg-glow-2"></div>
<canvas id="confetti"></canvas>

<div class="container">
  <!-- HEADER -->
  <header class="header">
    <div class="logo">
      <div class="logo-icon">G</div>
      <span class="logo-text">GitWidgets</span>
    </div>
    <p>Gamified <span>GitHub README widgets</span> that showcase your profile. Enter your username, unlock achievements, and copy widgets into your README.</p>
  </header>

  <!-- INPUT -->
  <div class="input-section">
    <div class="input-wrapper">
      <div class="input-prefix">github.com/</div>
      <input type="text" id="username-input" placeholder="Enter GitHub username..." autocomplete="off" spellcheck="false">
      <button class="generate-btn" id="generate-btn" onclick="generateWidgets()">Generate ‚ö°</button>
    </div>
    <div class="loading-bar" id="loading-bar"><div class="loading-bar-fill"></div></div>
    <div class="error-msg" id="error-msg"></div>
  </div>

  <!-- PROFILE -->
  <div class="profile-section" id="profile-section">
    <div class="profile-card">
      <div class="profile-top">
        <img class="avatar" id="avatar" src="" alt="avatar">
        <div class="profile-info">
          <div class="profile-name" id="profile-name"></div>
          <div class="profile-username" id="profile-username"></div>
          <div class="profile-bio" id="profile-bio"></div>
          <div class="profile-stats">
            <div class="stat">üì¶ <span class="stat-val" id="stat-repos">0</span> repos</div>
            <div class="stat">‚≠ê <span class="stat-val" id="stat-stars">0</span> stars</div>
            <div class="stat">üç¥ <span class="stat-val" id="stat-forks">0</span> forks</div>
            <div class="stat">üë• <span class="stat-val" id="stat-followers">0</span> followers</div>
            <div class="stat">üìÖ <span class="stat-val" id="stat-joined">-</span></div>
          </div>
        </div>
      </div>
      <!-- Level & XP -->
      <div class="level-section">
        <div class="level-header">
          <div class="level-badge" id="level-badge">üå± Newcomer</div>
          <div class="xp-text" id="xp-text">0 / 100 XP</div>
        </div>
        <div class="xp-bar"><div class="xp-bar-fill" id="xp-bar-fill" style="width:0%"></div></div>
        <div class="achievements" id="achievements"></div>
      </div>
    </div>

    <!-- WIDGETS -->
    <div class="widgets-header">
      <div class="widgets-title">üìä Your Widgets</div>
      <div class="theme-switcher">
        <div class="theme-btn active" data-theme="dark" style="background:linear-gradient(135deg,#0d1117,#161b22)" title="Dark" onclick="setTheme('dark',this)"></div>
        <div class="theme-btn" data-theme="radical" style="background:linear-gradient(135deg,#141321,#fe428e)" title="Radical" onclick="setTheme('radical',this)"></div>
        <div class="theme-btn" data-theme="neon" style="background:linear-gradient(135deg,#0a0a0f,#00f5a0)" title="Neon" onclick="setTheme('neon',this)"></div>
        <div class="theme-btn" data-theme="tokyonight" style="background:linear-gradient(135deg,#1a1b27,#70a5fd)" title="Tokyo Night" onclick="setTheme('tokyonight',this)"></div>
        <div class="theme-btn" data-theme="dracula" style="background:linear-gradient(135deg,#282a36,#bd93f9)" title="Dracula" onclick="setTheme('dracula',this)"></div>
        <div class="theme-btn" data-theme="gruvbox" style="background:linear-gradient(135deg,#282828,#fabd2f)" title="Gruvbox" onclick="setTheme('gruvbox',this)"></div>
      </div>
    </div>
    <div class="widgets-grid" id="widgets-grid"></div>

    <!-- CUSTOM BUILDER -->
    <div class="builder-section visible" id="builder-section">
      <div class="builder-card">
        <div class="builder-title">üõ†Ô∏è Custom Widget Builder</div>
        <div class="builder-subtitle">Craft your perfect widget with custom colors, themes, and styles</div>
        <div class="builder-grid">
          <div class="builder-options">
            <div class="option-group">
              <label>Widget Type</label>
              <select id="build-type" onchange="updateBuilderPreview()">
                <option value="stats">üìä Stats Card</option>
                <option value="streak">üî• Streak Stats</option>
                <option value="langs">üíª Top Languages</option>
                <option value="trophy">üèÜ Trophies</option>
                <option value="activity">üìà Activity Graph</option>
                <option value="summary">üìã Profile Summary</option>
              </select>
            </div>
            <div class="option-group">
              <label>Theme</label>
              <select id="build-theme" onchange="updateBuilderPreview()">
                <option value="dark">Dark</option>
                <option value="radical">Radical</option>
                <option value="tokyonight">Tokyo Night</option>
                <option value="dracula">Dracula</option>
                <option value="gruvbox">Gruvbox</option>
                <option value="onedark">One Dark</option>
                <option value="nord">Nord</option>
                <option value="catppuccin_mocha">Catppuccin Mocha</option>
                <option value="cobalt">Cobalt</option>
                <option value="synthwave">Synthwave</option>
                <option value="highcontrast">High Contrast</option>
                <option value="transparent">Transparent</option>
              </select>
            </div>
            <div class="option-group">
              <label>Layout (Languages)</label>
              <select id="build-layout" onchange="updateBuilderPreview()">
                <option value="compact">Compact</option>
                <option value="donut">Donut</option>
                <option value="donut-vertical">Donut Vertical</option>
                <option value="pie">Pie</option>
                <option value="default">Default</option>
              </select>
            </div>
            <div class="option-group">
              <label>Hide Border</label>
              <select id="build-border" onchange="updateBuilderPreview()">
                <option value="false">Show Border</option>
                <option value="true">Hide Border</option>
              </select>
            </div>
            <div class="color-row">
              <div class="option-group">
                <label>Accent Color</label>
                <input type="color" id="build-accent" value="#00f5a0" onchange="updateBuilderPreview()">
              </div>
              <div class="option-group">
                <label>BG Color</label>
                <input type="color" id="build-bg" value="#0d1117" onchange="updateBuilderPreview()">
              </div>
            </div>
          </div>
          <div class="builder-preview" id="builder-preview">
            <div style="color:var(--text-dim);font-size:14px">Enter a username above to start building</div>
          </div>
        </div>
        <div class="builder-code">
          <textarea id="builder-code-output" readonly placeholder="<!-- Your widget code will appear here -->"></textarea>
          <button class="copy-code-btn" onclick="copyBuilderCode()">üìã Copy Markdown Code</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- FOOTER -->
<div class="container">
  <div class="footer">
    Made with ‚ö° by <a href="https://github.com" target="_blank">GitWidgets</a> ‚Äî Add gamified widgets to your GitHub README
  </div>
</div>

<script>
// ============ STATE ============
let currentUser = '';
let currentTheme = 'dark';
let userData = null;
let reposData = [];
let totalStars = 0;
let totalForks = 0;
let topLanguages = {};

// ============ GENERATE ============
async function generateWidgets() {
  const input = document.getElementById('username-input').value.trim();
  if (!input) return showError('Please enter a GitHub username');
  
  currentUser = input;
  hideError();
  showLoading(true);
  document.getElementById('generate-btn').disabled = true;
  document.getElementById('profile-section').classList.remove('visible');

  try {
    // Fetch user
    const userRes = await fetch(`https://api.github.com/users/${input}`);
    if (!userRes.ok) throw new Error('User not found');
    userData = await userRes.json();

    // Fetch repos (up to 100)
    const reposRes = await fetch(`https://api.github.com/users/${input}/repos?per_page=100&sort=stargazers_count`);
    reposData = await reposRes.json();

    // Calculate stats
    totalStars = reposData.reduce((a, r) => a + (r.stargazers_count || 0), 0);
    totalForks = reposData.reduce((a, r) => a + (r.forks_count || 0), 0);
    topLanguages = {};
    reposData.forEach(r => {
      if (r.language) topLanguages[r.language] = (topLanguages[r.language] || 0) + 1;
    });

    renderProfile();
    renderWidgets();
    updateBuilderPreview();
    document.getElementById('profile-section').classList.add('visible');
    document.getElementById('profile-section').scrollIntoView({ behavior: 'smooth', block: 'start' });

    // Confetti for high-level users
    const xp = calculateXP();
    if (xp >= 500) fireConfetti();

  } catch (e) {
    showError(e.message === 'User not found' ? '‚ùå User not found. Check the username and try again.' : '‚ùå Something went wrong. Please try again.');
  } finally {
    showLoading(false);
    document.getElementById('generate-btn').disabled = false;
  }
}

// Enter key
document.getElementById('username-input').addEventListener('keydown', e => {
  if (e.key === 'Enter') generateWidgets();
});

// ============ PROFILE RENDER ============
function renderProfile() {
  document.getElementById('avatar').src = userData.avatar_url;
  document.getElementById('profile-name').textContent = userData.name || userData.login;
  document.getElementById('profile-username').textContent = '@' + userData.login;
  document.getElementById('profile-bio').textContent = userData.bio || 'No bio yet';
  document.getElementById('stat-repos').textContent = userData.public_repos;
  document.getElementById('stat-stars').textContent = formatNum(totalStars);
  document.getElementById('stat-forks').textContent = formatNum(totalForks);
  document.getElementById('stat-followers').textContent = formatNum(userData.followers);
  document.getElementById('stat-joined').textContent = 'Joined ' + new Date(userData.created_at).getFullYear();

  // Gamification
  const xp = calculateXP();
  const level = getLevel(xp);
  const badge = document.getElementById('level-badge');
  badge.className = 'level-badge ' + level.tier;
  badge.innerHTML = level.icon + ' ' + level.name;
  
  const nextXP = level.nextXP;
  const prevXP = level.prevXP;
  const pct = Math.min(100, ((xp - prevXP) / (nextXP - prevXP)) * 100);
  document.getElementById('xp-text').textContent = `${xp} / ${nextXP} XP`;
  
  setTimeout(() => {
    document.getElementById('xp-bar-fill').style.width = pct + '%';
  }, 300);

  // Achievements
  renderAchievements();
}

function calculateXP() {
  let xp = 0;
  xp += Math.min(totalStars * 2, 500);       // stars
  xp += Math.min(totalForks, 200);            // forks
  xp += Math.min(userData.public_repos * 3, 300); // repos
  xp += Math.min(userData.followers * 2, 400); // followers
  xp += Math.min(userData.following, 50);      // following
  // Account age bonus
  const years = (Date.now() - new Date(userData.created_at)) / (365.25 * 24 * 3600 * 1000);
  xp += Math.min(Math.floor(years * 20), 200);
  // Language diversity
  xp += Math.min(Object.keys(topLanguages).length * 10, 100);
  // Bio bonus
  if (userData.bio) xp += 20;
  if (userData.blog) xp += 15;
  if (userData.company) xp += 15;
  return Math.floor(xp);
}

function getLevel(xp) {
  const levels = [
    { name: 'Newcomer', tier: 'bronze', icon: 'üå±', min: 0, nextXP: 100, prevXP: 0 },
    { name: 'Contributor', tier: 'bronze', icon: 'üîß', min: 100, nextXP: 250, prevXP: 100 },
    { name: 'Builder', tier: 'silver', icon: 'üèóÔ∏è', min: 250, nextXP: 500, prevXP: 250 },
    { name: 'Architect', tier: 'silver', icon: 'üìê', min: 500, nextXP: 800, prevXP: 500 },
    { name: 'Mentor', tier: 'gold', icon: 'üéì', min: 800, nextXP: 1200, prevXP: 800 },
    { name: 'Expert', tier: 'gold', icon: '‚ö°', min: 1200, nextXP: 1600, prevXP: 1200 },
    { name: 'Master', tier: 'platinum', icon: 'üíé', min: 1600, nextXP: 2000, prevXP: 1600 },
    { name: 'Legendary', tier: 'diamond', icon: 'üåü', min: 2000, nextXP: 3000, prevXP: 2000 },
    { name: 'Mythic', tier: 'legendary', icon: 'üëë', min: 3000, nextXP: 5000, prevXP: 3000 },
  ];
  let result = levels[0];
  for (const l of levels) {
    if (xp >= l.min) result = l;
  }
  return result;
}

function renderAchievements() {
  const achievements = [
    { icon: '‚≠ê', name: 'Star Collector', desc: '50+ stars', unlocked: totalStars >= 50 },
    { icon: 'üç¥', name: 'Fork Master', desc: '20+ forks', unlocked: totalForks >= 20 },
    { icon: 'üì¶', name: 'Repo Hoarder', desc: '30+ repos', unlocked: userData.public_repos >= 30 },
    { icon: 'üë•', name: 'Influencer', desc: '100+ followers', unlocked: userData.followers >= 100 },
    { icon: 'üåê', name: 'Polyglot', desc: '5+ languages', unlocked: Object.keys(topLanguages).length >= 5 },
    { icon: 'üèõÔ∏è', name: 'Veteran', desc: '3+ years', unlocked: (Date.now() - new Date(userData.created_at)) > 3 * 365.25 * 24 * 3600 * 1000 },
    { icon: 'üìù', name: 'Storyteller', desc: 'Has a bio', unlocked: !!userData.bio },
    { icon: 'üîó', name: 'Connected', desc: 'Has website', unlocked: !!userData.blog },
    { icon: 'üíº', name: 'Professional', desc: 'Has company', unlocked: !!userData.company },
    { icon: 'üî•', name: 'Centurion', desc: '100+ repos', unlocked: userData.public_repos >= 100 },
    { icon: 'üåü', name: 'Star Nova', desc: '500+ stars', unlocked: totalStars >= 500 },
    { icon: 'üëë', name: 'Legend', desc: '1000+ followers', unlocked: userData.followers >= 1000 },
  ];

  const container = document.getElementById('achievements');
  container.innerHTML = achievements.map(a => `
    <div class="achievement ${a.unlocked ? 'unlocked' : 'locked'}" title="${a.desc}">
      <span class="achievement-icon">${a.icon}</span>
      ${a.name}
    </div>
  `).join('');
}

// ============ WIDGETS RENDER ============
function renderWidgets() {
  const u = currentUser;
  const t = currentTheme;
  
  const widgets = [
    {
      id: 'stats',
      icon: 'üìä',
      label: 'GitHub Stats',
      badge: '+50 XP',
      badgeClass: 'xp',
      img: `https://github-readme-stats.vercel.app/api?username=${u}&show_icons=true&theme=${t}&hide_border=true&border_radius=12&count_private=true`,
      md: `![GitHub Stats](https://github-readme-stats.vercel.app/api?username=${u}&show_icons=true&theme=${t}&hide_border=true)`
    },
    {
      id: 'streak',
      icon: 'üî•',
      label: 'Streak Stats',
      badge: '+40 XP',
      badgeClass: 'xp',
      img: `https://github-readme-streak-stats.herokuapp.com/?user=${u}&theme=${t}&hide_border=true&border_radius=12`,
      md: `![Streak](https://github-readme-streak-stats.herokuapp.com/?user=${u}&theme=${t}&hide_border=true)`
    },
    {
      id: 'langs',
      icon: 'üíª',
      label: 'Top Languages',
      badge: '+30 XP',
      badgeClass: 'xp',
      img: `https://github-readme-stats.vercel.app/api/top-langs/?username=${u}&layout=compact&theme=${t}&hide_border=true&border_radius=12`,
      md: `![Languages](https://github-readme-stats.vercel.app/api/top-langs/?username=${u}&layout=compact&theme=${t}&hide_border=true)`
    },
    {
      id: 'trophy',
      icon: 'üèÜ',
      label: 'Trophies',
      badge: 'RARE',
      badgeClass: 'rare',
      img: `https://github-profile-trophy.vercel.app/?username=${u}&theme=${t === 'dark' ? 'darkhub' : t === 'radical' ? 'radical' : t === 'tokyonight' ? 'tokyonight' : t === 'dracula' ? 'dracula' : t === 'gruvbox' ? 'gruvbox' : 'darkhub'}&no-frame=true&column=4&margin-w=10`,
      md: `![Trophies](https://github-profile-trophy.vercel.app/?username=${u}&theme=darkhub&no-frame=true&column=4)`
    },
    {
      id: 'activity',
      icon: 'üìà',
      label: 'Activity Graph',
      badge: 'EPIC',
      badgeClass: 'epic',
      img: `https://github-readme-activity-graph.vercel.app/graph?username=${u}&theme=${t === 'dark' ? 'github-dark' : t === 'radical' ? 'redical' : t === 'tokyonight' ? 'tokyo-night' : t === 'dracula' ? 'dracula' : t === 'gruvbox' ? 'gruvbox' : 'github-dark'}&hide_border=true&area=true`,
      md: `![Activity Graph](https://github-readme-activity-graph.vercel.app/graph?username=${u}&theme=github-dark&hide_border=true&area=true)`
    },
    {
      id: 'summary',
      icon: 'üìã',
      label: 'Profile Summary',
      badge: '+60 XP',
      badgeClass: 'xp',
      img: `https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username=${u}&theme=${t === 'dark' ? 'github_dark' : t === 'radical' ? 'radical' : t === 'tokyonight' ? 'tokyonight' : t === 'dracula' ? 'dracula' : t === 'gruvbox' ? 'gruvbox' : 'github_dark'}`,
      md: `![Summary](https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username=${u}&theme=github_dark)`
    },
    {
      id: 'productive-time',
      icon: '‚è∞',
      label: 'Productive Time',
      badge: '+25 XP',
      badgeClass: 'xp',
      img: `https://github-profile-summary-cards.vercel.app/api/cards/productive-time?username=${u}&theme=${t === 'dark' ? 'github_dark' : t === 'tokyonight' ? 'tokyonight' : t === 'dracula' ? 'dracula' : 'github_dark'}&utcOffset=5.5`,
      md: `![Productive Time](https://github-profile-summary-cards.vercel.app/api/cards/productive-time?username=${u}&theme=github_dark&utcOffset=5.5)`
    },
    {
      id: 'langs-summary',
      icon: 'üóÇÔ∏è',
      label: 'Languages by Repo',
      badge: 'RARE',
      badgeClass: 'rare',
      img: `https://github-profile-summary-cards.vercel.app/api/cards/repos-per-language?username=${u}&theme=${t === 'dark' ? 'github_dark' : t === 'tokyonight' ? 'tokyonight' : t === 'dracula' ? 'dracula' : 'github_dark'}`,
      md: `![Repos Per Language](https://github-profile-summary-cards.vercel.app/api/cards/repos-per-language?username=${u}&theme=github_dark)`
    }
  ];

  const grid = document.getElementById('widgets-grid');
  grid.innerHTML = widgets.map(w => `
    <div class="widget-card">
      <div class="widget-label">
        <div class="widget-label-left">
          <span class="widget-label-icon">${w.icon}</span>
          <span class="widget-label-text">${w.label}</span>
        </div>
        <span class="widget-label-badge ${w.badgeClass}">${w.badge}</span>
      </div>
      <div class="widget-preview">
        <img src="${w.img}" alt="${w.label}" loading="lazy" onerror="this.parentElement.innerHTML='<div style=\\'color:var(--text-dim);font-size:13px\\'>Widget unavailable</div>'">
      </div>
      <div class="widget-actions">
        <button class="copy-btn" onclick="copyWidget(this, \`${w.md.replace(/`/g, '\\`')}\`)">üìã Copy Markdown</button>
        <button class="download-btn" onclick="window.open('${w.img}','_blank')">‚Üó Open Image</button>
      </div>
    </div>
  `).join('');
}

// ============ THEME ============
function setTheme(theme, btn) {
  currentTheme = theme;
  document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  if (currentUser) renderWidgets();
}

// ============ CUSTOM BUILDER ============
function updateBuilderPreview() {
  if (!currentUser) return;
  
  const type = document.getElementById('build-type').value;
  const theme = document.getElementById('build-theme').value;
  const layout = document.getElementById('build-layout').value;
  const hideBorder = document.getElementById('build-border').value;
  const accent = document.getElementById('build-accent').value.replace('#', '');
  const bg = document.getElementById('build-bg').value.replace('#', '');
  
  let imgUrl = '';
  let mdCode = '';

  const base = `&hide_border=${hideBorder}&title_color=${accent}&bg_color=${bg}`;

  switch(type) {
    case 'stats':
      imgUrl = `https://github-readme-stats.vercel.app/api?username=${currentUser}&show_icons=true&theme=${theme}${base}&icon_color=${accent}&border_radius=12&count_private=true`;
      mdCode = `![GitHub Stats](${imgUrl})`;
      break;
    case 'streak':
      imgUrl = `https://github-readme-streak-stats.herokuapp.com/?user=${currentUser}&theme=${theme}&hide_border=${hideBorder}&ring=${accent}&fire=${accent}&currStreakLabel=${accent}&background=${bg}`;
      mdCode = `![Streak](${imgUrl})`;
      break;
    case 'langs':
      imgUrl = `https://github-readme-stats.vercel.app/api/top-langs/?username=${currentUser}&layout=${layout}&theme=${theme}${base}&border_radius=12`;
      mdCode = `![Top Languages](${imgUrl})`;
      break;
    case 'trophy':
      imgUrl = `https://github-profile-trophy.vercel.app/?username=${currentUser}&theme=${theme === 'dark' ? 'darkhub' : theme}&no-frame=true&column=4`;
      mdCode = `![Trophies](${imgUrl})`;
      break;
    case 'activity':
      imgUrl = `https://github-readme-activity-graph.vercel.app/graph?username=${currentUser}&theme=${theme === 'dark' ? 'github-dark' : theme}&hide_border=${hideBorder}&area=true&color=${accent}&line=${accent}&point=${accent}&bg_color=${bg}`;
      mdCode = `![Activity](${imgUrl})`;
      break;
    case 'summary':
      imgUrl = `https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username=${currentUser}&theme=${theme === 'dark' ? 'github_dark' : theme}`;
      mdCode = `![Summary](${imgUrl})`;
      break;
  }

  const preview = document.getElementById('builder-preview');
  preview.innerHTML = `<img src="${imgUrl}" alt="Custom Widget" onerror="this.outerHTML='<div style=\\'color:var(--text-dim);font-size:13px\\'>Preview unavailable for this combo</div>'">`;
  document.getElementById('builder-code-output').value = mdCode;
}

function copyBuilderCode() {
  const code = document.getElementById('builder-code-output').value;
  if (!code) return;
  navigator.clipboard.writeText(code);
  const btn = document.querySelector('.copy-code-btn');
  btn.textContent = '‚úÖ Copied!';
  setTimeout(() => btn.textContent = 'üìã Copy Markdown Code', 2000);
}

// ============ COPY WIDGET ============
function copyWidget(btn, md) {
  navigator.clipboard.writeText(md);
  btn.classList.add('copied');
  btn.innerHTML = '‚úÖ Copied!';
  setTimeout(() => {
    btn.classList.remove('copied');
    btn.innerHTML = 'üìã Copy Markdown';
  }, 2000);
}

// ============ UTILS ============
function formatNum(n) {
  if (n >= 1000) return (n / 1000).toFixed(1) + 'k';
  return n;
}
function showError(msg) {
  const el = document.getElementById('error-msg');
  el.textContent = msg;
  el.classList.add('visible');
}
function hideError() {
  document.getElementById('error-msg').classList.remove('visible');
}
function showLoading(show) {
  document.getElementById('loading-bar').classList.toggle('active', show);
}

// ============ CONFETTI ============
function fireConfetti() {
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const particles = [];
  const colors = ['#00f5a0', '#00d9ff', '#a855f7', '#f97316', '#fbbf24', '#ef4444', '#22d3ee'];
  
  for (let i = 0; i < 120; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: -20 - Math.random() * 300,
      w: 6 + Math.random() * 6,
      h: 4 + Math.random() * 4,
      vx: (Math.random() - 0.5) * 4,
      vy: 2 + Math.random() * 4,
      rot: Math.random() * 360,
      rotV: (Math.random() - 0.5) * 12,
      color: colors[Math.floor(Math.random() * colors.length)],
      life: 1
    });
  }
  
  let frame;
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    let alive = false;
    
    particles.forEach(p => {
      if (p.life <= 0) return;
      alive = true;
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.08;
      p.rot += p.rotV;
      p.life -= 0.005;
      
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot * Math.PI / 180);
      ctx.globalAlpha = p.life;
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
      ctx.restore();
    });
    
    if (alive) frame = requestAnimationFrame(animate);
    else ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
  animate();
  setTimeout(() => { cancelAnimationFrame(frame); ctx.clearRect(0, 0, canvas.width, canvas.height); }, 5000);
}

window.addEventListener('resize', () => {
  const c = document.getElementById('confetti');
  c.width = window.innerWidth;
  c.height = window.innerHeight;
});
</script>
</body>
</html>
