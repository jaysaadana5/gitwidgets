<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GitWidgets ‚Äî Gamified GitHub README Widgets</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a26;--border:#2a2a3e;--text:#e8e8f0;--text-dim:#8888a8;--accent:#00f5a0;--accent2:#00d9ff;--accent3:#a855f7;--accent4:#f97316;--danger:#ef4444;--gold:#fbbf24}
html{scroll-behavior:smooth}
body{font-family:'Outfit',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
.bg-grid{position:fixed;inset:0;z-index:0;background-image:linear-gradient(rgba(0,245,160,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,245,160,0.03) 1px,transparent 1px);background-size:60px 60px;mask-image:radial-gradient(ellipse 80% 60% at 50% 30%,black,transparent)}
.bg-glow{position:fixed;top:-200px;left:50%;transform:translateX(-50%);width:800px;height:800px;background:radial-gradient(circle,rgba(0,245,160,0.08),rgba(0,217,255,0.04),transparent 70%);z-index:0;pointer-events:none}
.bg-glow-2{position:fixed;bottom:-300px;right:-200px;width:600px;height:600px;background:radial-gradient(circle,rgba(168,85,247,0.06),transparent 70%);z-index:0;pointer-events:none}
.container{max-width:1200px;margin:0 auto;padding:0 24px;position:relative;z-index:1}
.header{padding:40px 0 20px;text-align:center;animation:fadeInDown .8s ease}
.logo{display:inline-flex;align-items:center;gap:12px;margin-bottom:16px}
.logo-icon{width:48px;height:48px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:800;color:var(--bg);box-shadow:0 0 30px rgba(0,245,160,0.3);animation:pulse-glow 3s ease-in-out infinite}
.logo-text{font-family:'Space Mono',monospace;font-size:28px;font-weight:700;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header p{color:var(--text-dim);font-size:16px;max-width:550px;margin:0 auto;line-height:1.6}
.header p span{color:var(--accent);font-weight:600}
.input-section{max-width:640px;margin:32px auto 40px;animation:fadeInUp .8s ease .2s both}
.input-wrapper{display:flex;background:var(--bg2);border:1.5px solid var(--border);border-radius:16px;overflow:hidden;transition:border-color .3s,box-shadow .3s}
.input-wrapper:focus-within{border-color:var(--accent);box-shadow:0 0 0 4px rgba(0,245,160,0.1),0 0 40px rgba(0,245,160,0.08)}
.input-prefix{display:flex;align-items:center;padding:0 16px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;font-size:13px;white-space:nowrap;background:rgba(0,245,160,0.04);border-right:1px solid var(--border)}
#username-input{flex:1;padding:16px;font-size:16px;background:transparent;border:none;outline:none;color:var(--text);font-family:'Outfit',sans-serif}
#username-input::placeholder{color:var(--text-dim);opacity:.5}
.generate-btn{padding:16px 28px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;cursor:pointer;font-family:'Outfit',sans-serif;font-size:15px;font-weight:700;color:var(--bg);letter-spacing:.5px;transition:opacity .2s,transform .1s;white-space:nowrap}
.generate-btn:hover{opacity:.9}.generate-btn:active{transform:scale(.98)}.generate-btn:disabled{opacity:.5;cursor:not-allowed}
.input-hint{margin-top:8px;text-align:center;font-size:12px;color:var(--text-dim);opacity:.6;font-family:'JetBrains Mono',monospace}
.loading-bar{height:3px;background:var(--bg3);border-radius:2px;margin-top:12px;overflow:hidden;display:none}
.loading-bar.active{display:block}
.loading-bar-fill{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3));border-radius:2px;animation:loading 1.5s ease-in-out infinite}
.profile-section{display:none;animation:fadeInUp .6s ease}.profile-section.visible{display:block}
.profile-card{background:var(--bg2);border:1px solid var(--border);border-radius:20px;padding:32px;margin-bottom:32px;position:relative;overflow:hidden}
.profile-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3),var(--accent4))}
.profile-top{display:flex;gap:24px;align-items:flex-start;flex-wrap:wrap}
.avatar{width:96px;height:96px;border-radius:50%;border:3px solid var(--accent);box-shadow:0 0 20px rgba(0,245,160,0.2)}
.profile-info{flex:1;min-width:200px}
.profile-name{font-size:26px;font-weight:800;margin-bottom:2px}
.profile-username{color:var(--accent);font-family:'JetBrains Mono',monospace;font-size:14px;margin-bottom:8px}
.profile-username a{color:inherit;text-decoration:none}.profile-username a:hover{text-decoration:underline}
.profile-bio{color:var(--text-dim);font-size:14px;line-height:1.5;margin-bottom:12px}
.profile-stats{display:flex;gap:20px;flex-wrap:wrap}
.stat{display:flex;align-items:center;gap:6px;font-size:13px;color:var(--text-dim)}
.stat-val{color:var(--text);font-weight:700;font-size:15px}
.level-section{margin-top:24px;padding-top:24px;border-top:1px solid var(--border)}
.level-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.level-badge{display:inline-flex;align-items:center;gap:8px;padding:6px 14px;border-radius:20px;font-weight:700;font-size:14px;border:1.5px solid}
.level-badge.bronze{border-color:#cd7f32;color:#cd7f32;background:rgba(205,127,50,0.1)}
.level-badge.silver{border-color:#c0c0c0;color:#c0c0c0;background:rgba(192,192,192,0.1)}
.level-badge.gold{border-color:var(--gold);color:var(--gold);background:rgba(251,191,36,0.1)}
.level-badge.platinum{border-color:var(--accent2);color:var(--accent2);background:rgba(0,217,255,0.1)}
.level-badge.diamond{border-color:var(--accent3);color:var(--accent3);background:rgba(168,85,247,0.1);box-shadow:0 0 15px rgba(168,85,247,0.2)}
.level-badge.legendary{border-image:linear-gradient(135deg,var(--gold),var(--accent),var(--accent3)) 1;color:var(--gold);background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(168,85,247,0.08))}
.xp-text{font-size:13px;color:var(--text-dim);font-family:'JetBrains Mono',monospace}
.xp-bar{height:8px;background:var(--bg3);border-radius:4px;overflow:hidden}
.xp-bar-fill{height:100%;border-radius:4px;transition:width 1.5s cubic-bezier(.4,0,.2,1);background:linear-gradient(90deg,var(--accent),var(--accent2));box-shadow:0 0 10px rgba(0,245,160,0.4)}
.achievements{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}
.achievement{display:flex;align-items:center;gap:6px;padding:6px 12px;border-radius:10px;background:var(--bg3);border:1px solid var(--border);font-size:12px;font-weight:600;transition:transform .2s,box-shadow .2s}
.achievement:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}
.achievement.unlocked{border-color:var(--gold);background:rgba(251,191,36,0.08)}
.achievement.locked{opacity:.4;filter:grayscale(1)}
.achievement-icon{font-size:16px}
.widgets-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}
.widgets-title{font-size:22px;font-weight:800}
.theme-switcher{display:flex;gap:6px}
.theme-btn{width:28px;height:28px;border-radius:8px;border:2px solid var(--border);cursor:pointer;transition:transform .2s,border-color .2s}
.theme-btn:hover{transform:scale(1.1)}.theme-btn.active{border-color:var(--accent);box-shadow:0 0 8px rgba(0,245,160,0.3)}
.widgets-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(360px,1fr));gap:20px;margin-bottom:40px}
.widget-card{background:var(--bg2);border:1px solid var(--border);border-radius:16px;overflow:hidden;transition:transform .3s,box-shadow .3s,border-color .3s;animation:fadeInUp .5s ease both}
.widget-card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,0.3);border-color:rgba(0,245,160,0.3)}
.widget-card:nth-child(1){animation-delay:.1s}.widget-card:nth-child(2){animation-delay:.15s}.widget-card:nth-child(3){animation-delay:.2s}.widget-card:nth-child(4){animation-delay:.25s}.widget-card:nth-child(5){animation-delay:.3s}.widget-card:nth-child(6){animation-delay:.35s}.widget-card:nth-child(7){animation-delay:.4s}.widget-card:nth-child(8){animation-delay:.45s}
.widget-label{padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border)}
.widget-label-left{display:flex;align-items:center;gap:8px}
.widget-label-icon{font-size:18px}.widget-label-text{font-weight:700;font-size:14px}
.widget-label-badge{font-size:11px;padding:2px 8px;border-radius:6px;font-weight:600;font-family:'JetBrains Mono',monospace}
.widget-label-badge.xp{background:rgba(0,245,160,0.15);color:var(--accent)}
.widget-label-badge.rare{background:rgba(168,85,247,0.15);color:var(--accent3)}
.widget-label-badge.epic{background:rgba(249,115,22,0.15);color:var(--accent4)}
.widget-preview{padding:16px;min-height:120px;display:flex;align-items:center;justify-content:center;background:var(--bg3)}
.widget-preview img{max-width:100%;height:auto;border-radius:6px}
.widget-error{color:var(--text-dim);font-size:13px;text-align:center;padding:20px}
.widget-actions{padding:12px 16px;display:flex;gap:8px;border-top:1px solid var(--border)}
.copy-btn,.open-btn{flex:1;padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:var(--bg3);color:var(--text);font-family:'Outfit',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:6px}
.copy-btn:hover{border-color:var(--accent);color:var(--accent);background:rgba(0,245,160,0.06)}
.open-btn:hover{border-color:var(--accent2);color:var(--accent2);background:rgba(0,217,255,0.06)}
.copy-btn.copied{background:rgba(0,245,160,0.15);color:var(--accent);border-color:var(--accent)}
.builder-section{display:none;margin-bottom:60px;animation:fadeInUp .6s ease}.builder-section.visible{display:block}
.builder-card{background:var(--bg2);border:1px solid var(--border);border-radius:20px;padding:32px;position:relative;overflow:hidden}
.builder-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--accent3),var(--accent4),var(--danger))}
.builder-title{font-size:22px;font-weight:800;margin-bottom:6px}
.builder-subtitle{color:var(--text-dim);font-size:14px;margin-bottom:24px}
.builder-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
@media(max-width:768px){.builder-grid{grid-template-columns:1fr}}
.builder-options{display:flex;flex-direction:column;gap:16px}
.option-group label{display:block;font-size:13px;font-weight:600;margin-bottom:6px;color:var(--text-dim);text-transform:uppercase;letter-spacing:1px}
.option-group select,.option-group input[type="text"],.option-group input[type="color"]{width:100%;padding:10px 14px;border-radius:10px;background:var(--bg3);border:1px solid var(--border);color:var(--text);font-family:'Outfit',sans-serif;font-size:14px;outline:none;transition:border-color .2s}
.option-group select:focus,.option-group input:focus{border-color:var(--accent)}
.option-group input[type="color"]{height:44px;cursor:pointer;padding:4px}
.option-group select option{background:var(--bg2);color:var(--text)}
.color-row{display:flex;gap:10px}.color-row .option-group{flex:1}
.builder-preview{background:var(--bg3);border-radius:14px;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;min-height:300px}
.builder-preview img{max-width:100%;border-radius:6px}
.builder-code{width:100%;margin-top:16px}
.builder-code textarea{width:100%;height:80px;padding:12px;border-radius:10px;background:var(--bg);border:1px solid var(--border);color:var(--accent);font-family:'JetBrains Mono',monospace;font-size:12px;resize:none;outline:none}
.copy-code-btn{margin-top:8px;width:100%;padding:10px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:var(--bg);font-weight:700;font-size:14px;cursor:pointer;font-family:'Outfit',sans-serif;transition:opacity .2s}
.copy-code-btn:hover{opacity:.9}
.error-msg{text-align:center;padding:16px;margin:12px auto;max-width:640px;background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);border-radius:12px;color:var(--danger);font-size:14px;display:none;animation:shake .4s ease}
.error-msg.visible{display:block}
.footer{text-align:center;padding:40px 0;color:var(--text-dim);font-size:13px;border-top:1px solid var(--border)}.footer a{color:var(--accent);text-decoration:none}
@media(max-width:640px){.widgets-grid{grid-template-columns:1fr}.profile-top{flex-direction:column;align-items:center;text-align:center}.profile-stats{justify-content:center}.input-prefix{display:none}.generate-btn{padding:16px 20px}.header .logo-text{font-size:22px}.achievements{justify-content:center}}
@keyframes fadeInDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes loading{0%{width:0}50%{width:70%}100%{width:100%}}
@keyframes pulse-glow{0%,100%{box-shadow:0 0 20px rgba(0,245,160,0.3)}50%{box-shadow:0 0 40px rgba(0,245,160,0.5)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:4px}
#confetti{position:fixed;inset:0;z-index:9999;pointer-events:none}
</style>
</head>
<body>
<div class="bg-grid"></div><div class="bg-glow"></div><div class="bg-glow-2"></div><canvas id="confetti"></canvas>
<div class="container">
  <header class="header">
    <div class="logo"><div class="logo-icon">G</div><span class="logo-text">GitWidgets</span></div>
    <p>Gamified <span>GitHub README widgets</span> that showcase your profile. Enter your username, unlock achievements, and copy widgets into your README.</p>
  </header>
  <div class="input-section">
    <div class="input-wrapper">
      <div class="input-prefix">github.com/</div>
      <input type="text" id="username-input" placeholder="username or full GitHub URL..." autocomplete="off" spellcheck="false">
      <button class="generate-btn" id="generate-btn">Generate ‚ö°</button>
    </div>
    <div class="input-hint">Accepts: username, github.com/username, or https://github.com/username</div>
    <div class="loading-bar" id="loading-bar"><div class="loading-bar-fill"></div></div>
    <div class="error-msg" id="error-msg"></div>
  </div>
  <div class="profile-section" id="profile-section">
    <div class="profile-card">
      <div class="profile-top">
        <img class="avatar" id="avatar" src="" alt="">
        <div class="profile-info">
          <div class="profile-name" id="profile-name"></div>
          <div class="profile-username" id="profile-username"></div>
          <div class="profile-bio" id="profile-bio"></div>
          <div class="profile-stats">
            <div class="stat">üì¶ <span class="stat-val" id="stat-repos">0</span> repos</div>
            <div class="stat">‚≠ê <span class="stat-val" id="stat-stars">0</span> stars</div>
            <div class="stat">üç¥ <span class="stat-val" id="stat-forks">0</span> forks</div>
            <div class="stat">üë• <span class="stat-val" id="stat-followers">0</span> followers</div>
            <div class="stat">üìÖ <span class="stat-val" id="stat-joined">-</span></div>
          </div>
        </div>
      </div>
      <div class="level-section">
        <div class="level-header">
          <div class="level-badge" id="level-badge">üå± Newcomer</div>
          <div class="xp-text" id="xp-text">0 / 100 XP</div>
        </div>
        <div class="xp-bar"><div class="xp-bar-fill" id="xp-bar-fill" style="width:0%"></div></div>
        <div class="achievements" id="achievements"></div>
      </div>
    </div>
    <div class="widgets-header">
      <div class="widgets-title">üìä Your Widgets</div>
      <div class="theme-switcher" id="theme-switcher">
        <div class="theme-btn active" data-theme="dark" title="Dark" style="background:linear-gradient(135deg,#0d1117,#161b22)"></div>
        <div class="theme-btn" data-theme="radical" title="Radical" style="background:linear-gradient(135deg,#141321,#fe428e)"></div>
        <div class="theme-btn" data-theme="neon" title="Neon" style="background:linear-gradient(135deg,#0a0a0f,#00f5a0)"></div>
        <div class="theme-btn" data-theme="tokyonight" title="Tokyo Night" style="background:linear-gradient(135deg,#1a1b27,#70a5fd)"></div>
        <div class="theme-btn" data-theme="dracula" title="Dracula" style="background:linear-gradient(135deg,#282a36,#bd93f9)"></div>
        <div class="theme-btn" data-theme="gruvbox" title="Gruvbox" style="background:linear-gradient(135deg,#282828,#fabd2f)"></div>
      </div>
    </div>
    <div class="widgets-grid" id="widgets-grid"></div>
    <div class="builder-section visible" id="builder-section">
      <div class="builder-card">
        <div class="builder-title">üõ†Ô∏è Custom Widget Builder</div>
        <div class="builder-subtitle">Craft your perfect widget with custom colors, themes, and styles</div>
        <div class="builder-grid">
          <div class="builder-options">
            <div class="option-group"><label>Widget Type</label><select id="build-type"><option value="stats">üìä Stats Card</option><option value="streak">üî• Streak Stats</option><option value="langs">üíª Top Languages</option><option value="trophy">üèÜ Trophies</option><option value="activity">üìà Activity Graph</option><option value="summary">üìã Profile Summary</option></select></div>
            <div class="option-group"><label>Theme</label><select id="build-theme"><option value="dark">Dark</option><option value="radical">Radical</option><option value="tokyonight">Tokyo Night</option><option value="dracula">Dracula</option><option value="gruvbox">Gruvbox</option><option value="onedark">One Dark</option><option value="nord">Nord</option><option value="catppuccin_mocha">Catppuccin</option><option value="cobalt">Cobalt</option><option value="synthwave">Synthwave</option><option value="highcontrast">High Contrast</option></select></div>
            <div class="option-group"><label>Layout (Languages)</label><select id="build-layout"><option value="compact">Compact</option><option value="donut">Donut</option><option value="donut-vertical">Donut Vertical</option><option value="pie">Pie</option><option value="default">Default</option></select></div>
            <div class="option-group"><label>Hide Border</label><select id="build-border"><option value="false">Show Border</option><option value="true">Hide Border</option></select></div>
            <div class="color-row"><div class="option-group"><label>Accent</label><input type="color" id="build-accent" value="#00f5a0"></div><div class="option-group"><label>BG</label><input type="color" id="build-bg" value="#0d1117"></div></div>
          </div>
          <div class="builder-preview" id="builder-preview"><div style="color:var(--text-dim);font-size:14px">Enter a username above to start building</div></div>
        </div>
        <div class="builder-code">
          <textarea id="builder-code-output" readonly placeholder="<!-- Your widget markdown code appears here -->"></textarea>
          <button class="copy-code-btn" id="copy-code-btn">üìã Copy Markdown Code</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container"><div class="footer">Made with ‚ö° by <a href="https://github.com" target="_blank">GitWidgets</a> ‚Äî Add gamified widgets to your GitHub README</div></div>

<script>
var currentUser='',currentTheme='dark',userData=null,reposData=[],totalStars=0,totalForks=0,topLanguages={},widgetsList=[];

function esc(s){if(!s)return'';return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}
function fmtN(n){return n>=1e3?(n/1e3).toFixed(1)+'k':String(n)}
function showErr(m){var e=document.getElementById('error-msg');e.textContent=m;e.classList.add('visible')}
function hideErr(){document.getElementById('error-msg').classList.remove('visible')}
function showLoad(s){document.getElementById('loading-bar').classList.toggle('active',s)}

function copyText(t){return navigator.clipboard.writeText(t).catch(function(){var a=document.createElement('textarea');a.value=t;a.style.cssText='position:fixed;left:-9999px';document.body.appendChild(a);a.select();document.execCommand('copy');document.body.removeChild(a)})}

function extractUser(raw){
  if(!raw)return'';raw=raw.trim().replace(/\/+$/,'');
  try{
    if(raw.indexOf('github.com')!==-1){
      var u=raw;if(u.indexOf('://')===-1)u='https://'+u;
      var p=new URL(u);
      if(p.hostname==='github.com'||p.hostname==='www.github.com'){
        var s=p.pathname.split('/').filter(function(x){return x.length>0});
        if(s.length>=1)return s[0];
      }
    }
  }catch(e){}
  if(raw.charAt(0)==='@')raw=raw.substring(1);
  raw=raw.split('/')[0].trim();
  if(/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,37}[a-zA-Z0-9])?$/.test(raw))return raw;
  if(/^[a-zA-Z0-9-]+$/.test(raw)&&raw.length<=39)return raw;
  return'';
}

async function generateWidgets(){
  var username=extractUser(document.getElementById('username-input').value);
  if(!username){showErr('Please enter a valid GitHub username or profile URL');return}
  currentUser=username;hideErr();showLoad(true);
  document.getElementById('generate-btn').disabled=true;
  document.getElementById('profile-section').classList.remove('visible');
  try{
    var r=await fetch('https://api.github.com/users/'+encodeURIComponent(username));
    if(r.status===404)throw{t:'nf'};
    if(r.status===403||r.status===429)throw{t:'rl'};
    if(!r.ok)throw{t:'api',s:r.status};
    userData=await r.json();
    if(!userData||!userData.login)throw{t:'bad'};
    reposData=[];
    try{var r2=await fetch('https://api.github.com/users/'+encodeURIComponent(username)+'/repos?per_page=100&sort=stargazers_count');if(r2.ok){var j=await r2.json();if(Array.isArray(j))reposData=j}}catch(e){}
    totalStars=0;totalForks=0;topLanguages={};
    for(var i=0;i<reposData.length;i++){totalStars+=(reposData[i].stargazers_count||0);totalForks+=(reposData[i].forks_count||0);if(reposData[i].language)topLanguages[reposData[i].language]=(topLanguages[reposData[i].language]||0)+1}
    renderProfile();renderWidgets();updateBuilder();
    var sec=document.getElementById('profile-section');sec.classList.add('visible');
    setTimeout(function(){sec.scrollIntoView({behavior:'smooth',block:'start'})},100);
    if(calcXP()>=500)confetti();
  }catch(e){
    if(e&&e.t==='nf')showErr('User "'+esc(username)+'" not found. Check the username and try again.');
    else if(e&&e.t==='rl')showErr('GitHub API rate limit reached (60/hour). Wait a minute and try again.');
    else if(e&&e.t==='api')showErr('GitHub API error (status '+e.s+'). Try again.');
    else showErr('Network error ‚Äî check your connection and try again.');
  }finally{showLoad(false);document.getElementById('generate-btn').disabled=false}
}

function calcXP(){
  var x=0;x+=Math.min(totalStars*2,500);x+=Math.min(totalForks,200);x+=Math.min(userData.public_repos*3,300);
  x+=Math.min(userData.followers*2,400);x+=Math.min(userData.following,50);
  x+=Math.min(Math.floor((Date.now()-new Date(userData.created_at).getTime())/(365.25*864e5)*20),200);
  x+=Math.min(Object.keys(topLanguages).length*10,100);
  if(userData.bio)x+=20;if(userData.blog)x+=15;if(userData.company)x+=15;return Math.floor(x);
}
function getLevel(xp){
  var L=[{n:'Newcomer',t:'bronze',i:'üå±',m:0,nx:100,px:0},{n:'Contributor',t:'bronze',i:'üîß',m:100,nx:250,px:100},{n:'Builder',t:'silver',i:'üèóÔ∏è',m:250,nx:500,px:250},{n:'Architect',t:'silver',i:'üìê',m:500,nx:800,px:500},{n:'Mentor',t:'gold',i:'üéì',m:800,nx:1200,px:800},{n:'Expert',t:'gold',i:'‚ö°',m:1200,nx:1600,px:1200},{n:'Master',t:'platinum',i:'üíé',m:1600,nx:2000,px:1600},{n:'Legendary',t:'diamond',i:'üåü',m:2000,nx:3000,px:2000},{n:'Mythic',t:'legendary',i:'üëë',m:3000,nx:5000,px:3000}];
  var r=L[0];for(var i=0;i<L.length;i++)if(xp>=L[i].m)r=L[i];return r;
}

function renderProfile(){
  document.getElementById('avatar').src=userData.avatar_url;
  document.getElementById('profile-name').textContent=userData.name||userData.login;
  var uel=document.getElementById('profile-username');uel.innerHTML='';
  var a=document.createElement('a');a.href='https://github.com/'+encodeURIComponent(userData.login);a.target='_blank';a.rel='noopener';a.textContent='@'+userData.login;uel.appendChild(a);
  document.getElementById('profile-bio').textContent=userData.bio||'No bio yet';
  document.getElementById('stat-repos').textContent=userData.public_repos;
  document.getElementById('stat-stars').textContent=fmtN(totalStars);
  document.getElementById('stat-forks').textContent=fmtN(totalForks);
  document.getElementById('stat-followers').textContent=fmtN(userData.followers);
  document.getElementById('stat-joined').textContent='Joined '+new Date(userData.created_at).getFullYear();
  var xp=calcXP(),lv=getLevel(xp),b=document.getElementById('level-badge');
  b.className='level-badge '+lv.t;b.textContent=lv.i+' '+lv.n;
  var pct=Math.min(100,((xp-lv.px)/(lv.nx-lv.px))*100);
  document.getElementById('xp-text').textContent=xp+' / '+lv.nx+' XP';
  document.getElementById('xp-bar-fill').style.width='0%';
  setTimeout(function(){document.getElementById('xp-bar-fill').style.width=pct+'%'},300);
  var ac=[{i:'‚≠ê',n:'Star Collector',d:'50+ stars',ok:totalStars>=50},{i:'üç¥',n:'Fork Master',d:'20+ forks',ok:totalForks>=20},{i:'üì¶',n:'Repo Hoarder',d:'30+ repos',ok:userData.public_repos>=30},{i:'üë•',n:'Influencer',d:'100+ followers',ok:userData.followers>=100},{i:'üåê',n:'Polyglot',d:'5+ languages',ok:Object.keys(topLanguages).length>=5},{i:'üèõÔ∏è',n:'Veteran',d:'3+ years',ok:(Date.now()-new Date(userData.created_at).getTime())>3*365.25*864e5},{i:'üìù',n:'Storyteller',d:'Has a bio',ok:!!userData.bio},{i:'üîó',n:'Connected',d:'Has website',ok:!!userData.blog},{i:'üíº',n:'Professional',d:'Has company',ok:!!userData.company},{i:'üî•',n:'Centurion',d:'100+ repos',ok:userData.public_repos>=100},{i:'üåü',n:'Star Nova',d:'500+ stars',ok:totalStars>=500},{i:'üëë',n:'Legend',d:'1000+ followers',ok:userData.followers>=1000}];
  var h='';for(var i=0;i<ac.length;i++)h+='<div class="achievement '+(ac[i].ok?'unlocked':'locked')+'" title="'+esc(ac[i].d)+'"><span class="achievement-icon">'+ac[i].i+'</span>'+esc(ac[i].n)+'</div>';
  document.getElementById('achievements').innerHTML=h;
}

function tFor(svc,t){
  var m={trophy:{dark:'darkhub',radical:'radical',tokyonight:'tokyonight',dracula:'dracula',gruvbox:'gruvbox',neon:'darkhub'},activity:{dark:'github-dark',radical:'redical',tokyonight:'tokyo-night',dracula:'dracula',gruvbox:'gruvbox',neon:'github-dark'},summary:{dark:'github_dark',radical:'radical',tokyonight:'tokyonight',dracula:'dracula',gruvbox:'gruvbox',neon:'github_dark'}};
  return(m[svc]&&m[svc][t])||(m[svc]&&m[svc]['dark'])||t;
}

function renderWidgets(){
  var u=encodeURIComponent(currentUser),t=currentTheme;
  widgetsList=[
    {ic:'üìä',lb:'GitHub Stats',bd:'+50 XP',bc:'xp',img:'https://github-readme-stats.vercel.app/api?username='+u+'&show_icons=true&theme='+t+'&hide_border=true&border_radius=12&count_private=true',md:'![GitHub Stats](https://github-readme-stats.vercel.app/api?username='+u+'&show_icons=true&theme='+t+'&hide_border=true)'},
    {ic:'üî•',lb:'Streak Stats',bd:'+40 XP',bc:'xp',img:'https://github-readme-streak-stats.herokuapp.com/?user='+u+'&theme='+t+'&hide_border=true&border_radius=12',md:'![Streak](https://github-readme-streak-stats.herokuapp.com/?user='+u+'&theme='+t+'&hide_border=true)'},
    {ic:'üíª',lb:'Top Languages',bd:'+30 XP',bc:'xp',img:'https://github-readme-stats.vercel.app/api/top-langs/?username='+u+'&layout=compact&theme='+t+'&hide_border=true&border_radius=12',md:'![Languages](https://github-readme-stats.vercel.app/api/top-langs/?username='+u+'&layout=compact&theme='+t+'&hide_border=true)'},
    {ic:'üèÜ',lb:'Trophies',bd:'RARE',bc:'rare',img:'https://github-profile-trophy.vercel.app/?username='+u+'&theme='+tFor('trophy',t)+'&no-frame=true&column=4&margin-w=10',md:'![Trophies](https://github-profile-trophy.vercel.app/?username='+u+'&theme='+tFor('trophy',t)+'&no-frame=true&column=4)'},
    {ic:'üìà',lb:'Activity Graph',bd:'EPIC',bc:'epic',img:'https://github-readme-activity-graph.vercel.app/graph?username='+u+'&theme='+tFor('activity',t)+'&hide_border=true&area=true',md:'![Activity Graph](https://github-readme-activity-graph.vercel.app/graph?username='+u+'&theme='+tFor('activity',t)+'&hide_border=true&area=true)'},
    {ic:'üìã',lb:'Profile Summary',bd:'+60 XP',bc:'xp',img:'https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username='+u+'&theme='+tFor('summary',t),md:'![Summary](https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username='+u+'&theme='+tFor('summary',t)+')'},
    {ic:'‚è∞',lb:'Productive Time',bd:'+25 XP',bc:'xp',img:'https://github-profile-summary-cards.vercel.app/api/cards/productive-time?username='+u+'&theme='+tFor('summary',t)+'&utcOffset=5.5',md:'![Productive Time](https://github-profile-summary-cards.vercel.app/api/cards/productive-time?username='+u+'&theme='+tFor('summary',t)+'&utcOffset=5.5)'},
    {ic:'üóÇÔ∏è',lb:'Languages by Repo',bd:'RARE',bc:'rare',img:'https://github-profile-summary-cards.vercel.app/api/cards/repos-per-language?username='+u+'&theme='+tFor('summary',t),md:'![Repos Per Language](https://github-profile-summary-cards.vercel.app/api/cards/repos-per-language?username='+u+'&theme='+tFor('summary',t)+')'}
  ];
  var g=document.getElementById('widgets-grid'),h='';
  for(var i=0;i<widgetsList.length;i++){var w=widgetsList[i];
    h+='<div class="widget-card"><div class="widget-label"><div class="widget-label-left"><span class="widget-label-icon">'+w.ic+'</span><span class="widget-label-text">'+esc(w.lb)+'</span></div><span class="widget-label-badge '+w.bc+'">'+w.bd+'</span></div><div class="widget-preview"><img src="'+esc(w.img)+'" alt="'+esc(w.lb)+'" loading="lazy"></div><div class="widget-actions"><button class="copy-btn" data-i="'+i+'">üìã Copy Markdown</button><button class="open-btn" data-i="'+i+'">‚Üó Open Image</button></div></div>';
  }
  g.innerHTML=h;
  var imgs=g.querySelectorAll('.widget-preview img');
  for(var j=0;j<imgs.length;j++)imgs[j].addEventListener('error',function(){this.parentElement.innerHTML='<div class="widget-error">Widget unavailable ‚Äî try a different theme</div>'});
}

function updateBuilder(){
  if(!currentUser)return;
  var type=document.getElementById('build-type').value,theme=document.getElementById('build-theme').value,layout=document.getElementById('build-layout').value,hb=document.getElementById('build-border').value,ac=document.getElementById('build-accent').value.replace('#',''),bg=document.getElementById('build-bg').value.replace('#',''),u=encodeURIComponent(currentUser),url='',base='&hide_border='+hb+'&title_color='+ac+'&bg_color='+bg;
  if(type==='stats')url='https://github-readme-stats.vercel.app/api?username='+u+'&show_icons=true&theme='+theme+base+'&icon_color='+ac+'&border_radius=12&count_private=true';
  else if(type==='streak')url='https://github-readme-streak-stats.herokuapp.com/?user='+u+'&theme='+theme+'&hide_border='+hb+'&ring='+ac+'&fire='+ac+'&currStreakLabel='+ac+'&background='+bg;
  else if(type==='langs')url='https://github-readme-stats.vercel.app/api/top-langs/?username='+u+'&layout='+layout+'&theme='+theme+base+'&border_radius=12';
  else if(type==='trophy')url='https://github-profile-trophy.vercel.app/?username='+u+'&theme='+tFor('trophy',theme)+'&no-frame=true&column=4';
  else if(type==='activity')url='https://github-readme-activity-graph.vercel.app/graph?username='+u+'&theme='+tFor('activity',theme)+'&hide_border='+hb+'&area=true&color='+ac+'&line='+ac+'&point='+ac+'&bg_color='+bg;
  else if(type==='summary')url='https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username='+u+'&theme='+tFor('summary',theme);
  var md='![Widget]('+url+')';
  var pv=document.getElementById('builder-preview');pv.innerHTML='';
  var img=document.createElement('img');img.src=url;img.alt='Preview';
  img.addEventListener('error',function(){pv.innerHTML='<div style="color:var(--text-dim);font-size:13px">Preview unavailable</div>'});
  pv.appendChild(img);
  document.getElementById('builder-code-output').value=md;
}

// EVENT LISTENERS
document.getElementById('generate-btn').addEventListener('click',generateWidgets);
document.getElementById('username-input').addEventListener('keydown',function(e){if(e.key==='Enter')generateWidgets()});
document.getElementById('username-input').addEventListener('paste',function(){var s=this;setTimeout(function(){var x=extractUser(s.value);if(x&&x!==s.value.trim())s.value=x},50)});
document.getElementById('theme-switcher').addEventListener('click',function(e){var b=e.target.closest('.theme-btn');if(!b)return;currentTheme=b.getAttribute('data-theme');var all=document.querySelectorAll('.theme-btn');for(var i=0;i<all.length;i++)all[i].classList.remove('active');b.classList.add('active');if(currentUser)renderWidgets()});
document.getElementById('widgets-grid').addEventListener('click',function(e){
  var cb=e.target.closest('.copy-btn'),ob=e.target.closest('.open-btn');
  if(cb){var w=widgetsList[parseInt(cb.getAttribute('data-i'))];if(w)copyText(w.md).then(function(){cb.classList.add('copied');cb.textContent='‚úÖ Copied!';setTimeout(function(){cb.classList.remove('copied');cb.textContent='üìã Copy Markdown'},2e3)})}
  if(ob){var w2=widgetsList[parseInt(ob.getAttribute('data-i'))];if(w2)window.open(w2.img,'_blank')}
});
document.getElementById('build-type').addEventListener('change',updateBuilder);
document.getElementById('build-theme').addEventListener('change',updateBuilder);
document.getElementById('build-layout').addEventListener('change',updateBuilder);
document.getElementById('build-border').addEventListener('change',updateBuilder);
document.getElementById('build-accent').addEventListener('input',updateBuilder);
document.getElementById('build-bg').addEventListener('input',updateBuilder);
document.getElementById('copy-code-btn').addEventListener('click',function(){var c=document.getElementById('builder-code-output').value;if(!c)return;var b=this;copyText(c).then(function(){b.textContent='‚úÖ Copied!';setTimeout(function(){b.textContent='üìã Copy Markdown Code'},2e3)})});

function confetti(){
  var cv=document.getElementById('confetti'),cx=cv.getContext('2d');cv.width=innerWidth;cv.height=innerHeight;
  var P=[],C=['#00f5a0','#00d9ff','#a855f7','#f97316','#fbbf24','#ef4444','#22d3ee'];
  for(var i=0;i<120;i++)P.push({x:Math.random()*cv.width,y:-20-Math.random()*300,w:6+Math.random()*6,h:4+Math.random()*4,vx:(Math.random()-.5)*4,vy:2+Math.random()*4,r:Math.random()*360,rv:(Math.random()-.5)*12,c:C[Math.floor(Math.random()*C.length)],l:1});
  var f;function go(){cx.clearRect(0,0,cv.width,cv.height);var alive=false;
    for(var i=0;i<P.length;i++){var p=P[i];if(p.l<=0)continue;alive=true;p.x+=p.vx;p.y+=p.vy;p.vy+=.08;p.r+=p.rv;p.l-=.005;cx.save();cx.translate(p.x,p.y);cx.rotate(p.r*Math.PI/180);cx.globalAlpha=p.l;cx.fillStyle=p.c;cx.fillRect(-p.w/2,-p.h/2,p.w,p.h);cx.restore()}
    if(alive)f=requestAnimationFrame(go);else cx.clearRect(0,0,cv.width,cv.height)}go();
  setTimeout(function(){cancelAnimationFrame(f);cx.clearRect(0,0,cv.width,cv.height)},5e3);
}
addEventListener('resize',function(){var c=document.getElementById('confetti');c.width=innerWidth;c.height=innerHeight});
</script>
</body>
</html>
